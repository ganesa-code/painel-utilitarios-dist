_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[23],{"UN6+":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("nKUr"),a=n("33Fu"),s=n("YhpK"),i=n.n(s);function o(){return Object(r.jsxs)("div",{className:i.a.wrapper,children:[Object(r.jsx)(a.b,{size:50,color:"#b23237"}),Object(r.jsx)("h1",{children:"Acesso Bloqueado"})]})}},YhpK:function(e,t,n){e.exports={wrapper:"style_wrapper__22fyg"}},"aM2/":function(e,t,n){e.exports={container:"styles_container__17BEo",reposicoesTable:"styles_reposicoesTable__3HQWZ",reposicaoForm:"styles_reposicaoForm__vwaJy",reposicaoInput:"styles_reposicaoInput__2U6g-",turnPhoneImage:"styles_turnPhoneImage__25pKz"}},cLvt:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/consultar-reposicoes",function(){return n("l+/E")}])},"l+/E":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return m}));var r=n("nKUr"),a=n("vJKn"),s=n.n(a),i=n("rg98"),o=n("q1tI"),c=n("Tgqd"),u=n("9rZX"),d=n.n(u),l=n("r9w1"),p=n("Z3vd"),j=n("FGyW"),O=n("Dp36"),b=n("tRs7"),f=n("aM2/"),h=n.n(f),x=(n("jDDT"),n("bFzY")),v=n("UN6+"),E=new b.a;function m(){var e=Object(o.useState)([]),t=e[0],n=e[1],a=Object(o.useState)(),u=a[0],b=a[1],f=Object(o.useState)(!1),m=f[0],A=f[1],D=Object(o.useState)(""),_=D[0],I=D[1],T=Object(o.useState)(""),S=T[0],w=T[1],N=Object(o.useState)(window.innerWidth),y=N[0],g=N[1];Object(o.useEffect)((function(){O.a.get("/reposicao").then((function(e){n(e.data.data)})).catch((function(e){throw e}))}),[]);var C=function(){g(window.innerWidth)};Object(o.useEffect)((function(){window.addEventListener("resize",C)}),[]);var P=Object(x.c)().user,R=function(){var e=Object(i.a)(s.a.mark((function e(r){var a,i,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.filter((function(e){return e._id!==r._id})),i={QUANTIDADEREPO:r.QUANTIDADEREPO,QUANTIDADEDISPLAY:r.QUANTIDADEDISPLAY,status:"completed",COMPLETEDBY:"605a4c9add38ff0f00a905d4",filial:"00"},e.next=4,O.a.put("/reposicao/".concat(r._id),i);case 4:o=e.sent,n(a),o.data.data?E.notify("Reposi\xe7\xe3o conclu\xedda","success"):E.notify("Algo deu errado","error");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=Object(i.a)(s.a.mark((function e(){var n,r,a,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(parseInt(_)<0||Number(_)>u.ESTOQUE)){e.next=6;break}return I("0"),E.notify("Informar uma quantidade v\xe1lida de reposi\xe7\xe3o","warning"),e.abrupt("return");case 6:if(!(parseInt(_)>u.ESTOQUE)){e.next=10;break}return I("0"),E.notify("O produto n\xe3o possui estoque suficiente para quantidade demandada","warning"),e.abrupt("return");case 10:return n=t.map((function(e){return e})),r=t.findIndex((function(e){return u._id===e._id})),n[r].QUANTIDADEREPO=_,n[r].QUANTIDADEDISPLAY=S,a={QUANTIDADEREPO:_,QUANTIDADEDISPLAY:S},e.next=17,O.a.put("/reposicao/".concat(u._id),a);case 17:i=e.sent,A(!1),i.data.data?E.notify("Reposi\xe7\xe3o alterada","success"):E.notify("Algo deu errado","error");case 20:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Q=function(){var e=Object(i.a)(s.a.mark((function e(r){var a,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.filter((function(e){return r!==e._id})),e.next=3,O.a.delete("/reposicao/".concat(r));case 3:i=e.sent,n(a),"ok"===i.data.status?E.notify("Reposi\xe7\xe3o exclu\xedda","success"):E.notify("Algo deu errado","error");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.jsx)("div",{className:h.a.container,children:"SEM_ACESSO"!==(null===P||void 0===P?void 0:P.permissions.visualizarReposicoes)?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("h2",{children:"Consultar Reposi\xe7\xf5es"}),y>600?Object(r.jsxs)("table",{className:h.a.reposicoesTable,children:[Object(r.jsx)("thead",{children:Object(r.jsxs)("tr",{children:[Object(r.jsx)("th",{children:"C\xf3digo"}),Object(r.jsx)("th",{children:"Descri\xe7\xe3o"}),Object(r.jsx)("th",{children:"Estoque"}),Object(r.jsx)("th",{children:"Repor"}),Object(r.jsx)("th",{children:"Em Display"}),Object(r.jsx)("th",{children:"Usu\xe1rio"}),Object(r.jsx)("th",{children:"A\xe7\xe3o"})]})}),Object(r.jsx)("tbody",{children:null===t||void 0===t?void 0:t.map((function(e){return Object(r.jsxs)("tr",{children:[Object(r.jsx)("td",{children:e.CODPROD}),Object(r.jsx)("td",{children:e.DESCRICAO}),Object(r.jsx)("td",{children:e.ESTOQUE}),Object(r.jsx)("td",{children:e.QUANTIDADEREPO}),Object(r.jsx)("td",{children:e.QUANTIDADEDISPLAY}),Object(r.jsx)("td",{children:e.REQUESTEDBY}),Object(r.jsx)("td",{children:"ACESSO_TOTAL"===(null===P||void 0===P?void 0:P.permissions.visualizarReposicoes)?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(c.b,{size:25,color:"#00b10f",onClick:function(){return R(e)}}),Object(r.jsx)(c.g,{size:22,color:"#f4c800",onClick:function(){w(e.QUANTIDADEDISPLAY.toString()),I(e.QUANTIDADEREPO.toString()),b(e),A(!0)}}),Object(r.jsx)(c.r,{size:25,color:"#f00",onClick:function(){return Q(e._id)}})]}):Object(r.jsx)("span",{children:"Usu\xe1rio sem Permiss\xe3o"})})]},e._id)}))})]}):Object(r.jsx)("img",{className:h.a.turnPhoneImage,src:"/images/turn-phone.png",alt:"Deixar telefone na horizontal"}),Object(r.jsx)(j.a,{}),Object(r.jsx)(d.a,{isOpen:m,onRequestClose:function(){A(!1)},overlayClassName:"react-modal-overlay",className:"react-modal-content",children:u&&Object(r.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[Object(r.jsxs)("h3",{children:[u.CODPROD," - ",u.DESCRICAO]}),Object(r.jsxs)("form",{noValidate:!0,autoComplete:"off",className:h.a.reposicaoForm,children:[Object(r.jsx)(l.a,{label:"Estoque",variant:"outlined",disabled:"ACESSO_TOTAL"!==(null===P||void 0===P?void 0:P.permissions.visualizarReposicoes),className:h.a.reposicaoInput,value:u.ESTOQUE}),Object(r.jsx)(l.a,{label:"Quantidade Demandada",type:"number",disabled:"ACESSO_TOTAL"!==(null===P||void 0===P?void 0:P.permissions.visualizarReposicoes),variant:"outlined",value:_,InputProps:{inputProps:{min:0}},className:h.a.reposicaoInput,onChange:function(e){return I(e.target.value)}}),Object(r.jsx)(l.a,{label:"Quantidade em Display",type:"number",InputProps:{inputProps:{min:0}},variant:"outlined",disabled:"ACESSO_TOTAL"!==(null===P||void 0===P?void 0:P.permissions.visualizarReposicoes),value:S,className:h.a.reposicaoInput,onChange:function(e){return w(e.target.value)}})]}),Object(r.jsx)(p.a,{className:h.a.atualizarButton,variant:"contained",disabled:"ACESSO_TOTAL"!==(null===P||void 0===P?void 0:P.permissions.visualizarReposicoes),style:{backgroundColor:"#B23237",color:"#f4f4f4",width:"fit-content",margin:"2rem auto 0 auto"},onClick:U,children:"Alterar Reposi\xe7\xe3o"})]})})]}):Object(r.jsx)(v.a,{})})}}},[["cLvt",0,1,4,7,3,2,5,6,9]]]);