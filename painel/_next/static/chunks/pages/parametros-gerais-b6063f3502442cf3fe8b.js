_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[30],{DbXy:function(e,t,n){e.exports={invisible:"styles_invisible__2eb-b",visible:"styles_visible__2b1oV",totais:"styles_totais__1vmZn",produtoInput:"styles_produtoInput__27fS-",clienteInput:"styles_clienteInput__2WKkT",searchResult:"styles_searchResult__26Gln"}},EDS1:function(e,t,n){e.exports={wrapper:"styles_wrapper__3td6h",formParm:"styles_formParm__3ZCy6",formDiv:"styles_formDiv__2zR71",paramSession:"styles_paramSession__dRmgE",inputForm:"styles_inputForm__2iPK9",numeroOs:"styles_numeroOs__1td34",inputWide:"styles_inputWide__3appR",resultsDiv:"styles_resultsDiv__1t8Xo",visible:"styles_visible__1g-fD",invisible:"styles_invisible__2qCfu",fornecedores:"styles_fornecedores__PUnE9",searchResults:"styles_searchResults__2XL8m"}},Ry4D:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("nKUr"),a=n("r9w1"),s=n("q1tI"),c=n.n(s),o=n("ddHN"),i=n("DbXy"),u=n.n(i),l=c.a.forwardRef((function(e,t){var n=e.disabled,c=e.admConv,i=void 0!==c&&c,l=e.handleIsSelected,b=Object(s.useState)(),d=b[0],p=b[1],f=Object(s.useState)(),j=f[0],O=f[1],m=Object(s.useState)(),v=m[0],_=m[1],h=Object(s.useState)(!1),y=h[0],x=h[1],S=Object(s.useRef)(null),N=Object(o.b)().getApi;Object(s.useImperativeHandle)(t,(function(){return{getMyState:function(){return v}}}),[v]),Object(s.useEffect)((function(){window.addEventListener("mousedown",g)}),[]);var g=function(e){var t;S&&"NOMECLIENTE"===e.target.name?x(!0):!S||null!==(t=S.current)&&void 0!==t&&t.contains(e.target)||x(!1)};return Object(r.jsxs)("div",{className:u.a.clienteInput,children:[Object(r.jsx)(a.a,{label:i?"Administradora de Cart\xe3o":"Cliente",name:"NOMECLIENTE",autoComplete:"off",variant:"outlined",disabled:n||!1,value:d,color:"primary",onChange:function(e){return function(e){if(x(!0),p(e.target.value),e.target.value.length>0){var t=i?"/adm-conv":"/clientes";N.then((function(n){n.post(t,{search:e.target.value}).then((function(e){O(i?e.data.administradoras:e.data.parsedClientes)}))}))}else x(!1),O([])}(e)}}),j&&Object(r.jsx)("div",{ref:S,className:"".concat(u.a.searchResult," ").concat(y?u.a.visible:u.a.invisible),children:j.map((function(e){return Object(r.jsx)("span",{onClick:function(){p(e.CODCLIENTE+" - "+e.NOME),_(e),x(!1),i&&l&&l()},children:e.CODCLIENTE+" - "+e.NOME},e.CODCLIENTE)}))})]})}))},"UN6+":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("nKUr"),a=n("33Fu"),s=n("YhpK"),c=n.n(s);function o(){return Object(r.jsxs)("div",{className:c.a.wrapper,children:[Object(r.jsx)(a.c,{size:50,color:"#b23237"}),Object(r.jsx)("h1",{children:"Acesso Bloqueado"})]})}},YhpK:function(e,t,n){e.exports={wrapper:"style_wrapper__22fyg"}},wqa0:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/parametros-gerais",function(){return n("wvbT")}])},wvbT:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return S}));var r=n("nKUr"),a=n("cpVT"),s=n("vJKn"),c=n.n(s),o=n("rg98"),i=n("r9w1"),u=n("q1tI"),l=n("Tgqd"),b=n("FGyW"),d=(n("jDDT"),n("Ry4D")),p=n("bFzY"),f=n("UN6+"),j=n("tRs7"),O=n("EDS1"),m=n.n(O),v=n("ddHN");function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var y,x=new j.a;function S(){var e=Object(u.useState)(),t=e[0],n=e[1],a=Object(u.useState)({ALIQICMS:0}),s=a[0],j=a[1],O=Object(u.useState)(!1),_=O[0],S=O[1],N=Object(u.useState)(!1),g=N[0],E=N[1],w=Object(u.useState)(!1),C=w[0],I=w[1],P=Object(u.useState)(!1),D=P[0],L=P[1],k=Object(u.useState)(0),T=k[0],A=k[1],R=Object(p.c)().user,F=Object(v.b)().getApi,z=Object(u.useRef)(null),M="SOMENTE_CONSULTA"!==(null===R||void 0===R?void 0:R.permissions.parametrosGerais);Object(u.useEffect)((function(){F.then((function(e){(y=e).get("/parametros/nfse").then((function(e){n(e.data.paramsNFSe[0])}))}))}),[]);var q=function(){var e=Object(o.a)(c.a.mark((function e(){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={loteNFSE:t.LOTENFSE,loteRPS:t.LOTERPS},e.next=3,y.post("/parametros/nfse",n);case 3:"ok"===e.sent.data.status?x.notify("Altera\xe7\xe3o enviada ao sistema","success"):x.notify("Algo deu errado","error"),S(!1),E(!1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),K=function(){var e=Object(o.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.post("/parametros/atualiza-aliq",s);case 2:"ok"===e.sent.data.status?x.notify("Al\xedquota alterada com sucesso","success"):x.notify("Algo deu errado","error"),I(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),U=function(){var e=Object(o.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(T&&!(T<=0)&&null!==(t=z.current)&&void 0!==t&&t.getMyState()){e.next=3;break}return x.notify("Preencha corretamente o n\xfamero da O.S. e o novo cliente","warning"),e.abrupt("return");case 3:return e.prev=3,e.next=6,y.post("/parametros/atualiza-cliente-os",{os:T,cliente:null===(n=z.current)||void 0===n?void 0:n.getMyState().CODCLIENTE});case 6:"ok"===e.sent.data.status?x.notify("Cliente alterado com sucesso","success"):x.notify("Algo deu errado","error"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),x.notify(e.t0.response.data.message,"error");case 13:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(){return e.apply(this,arguments)}}();return Object(r.jsx)("div",{className:m.a.wrapper,children:"SEM_ACESSO"!==(null===R||void 0===R?void 0:R.permissions.parametrosGerais)?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("h2",{children:"Par\xe2metros Gerais"}),Object(r.jsxs)("div",{className:m.a.paramSession,children:[Object(r.jsx)("h2",{children:"Fiscal"}),Object(r.jsx)("form",{children:Object(r.jsxs)("div",{className:m.a.formDiv,children:[Object(r.jsx)("span",{children:"Atualizar Al\xedquota ICMS: "}),Object(r.jsx)(i.a,{label:"Aliq. ICMS",type:"number",variant:"outlined",disabled:!C,className:m.a.inputForm,value:s.ALIQICMS,onChange:function(e){return j({ALIQICMS:Number(e.target.value)})},InputProps:{endAdornment:C?Object(r.jsx)(l.b,{size:30,color:"#28aa0f",onClick:K}):Object(r.jsx)(l.g,{size:30,color:"#e9bb1f",onClick:function(){M&&I(!0)}})}})]})})]}),Object(r.jsxs)("div",{className:m.a.paramSession,children:[Object(r.jsx)("h2",{children:"NFS-e / O.S."}),t&&Object(r.jsxs)("form",{className:m.a.formParm,children:[Object(r.jsxs)("div",{className:m.a.formDiv,children:[Object(r.jsx)("span",{children:"Alterar cliente da O.S.:"}),Object(r.jsx)(i.a,{type:"number",variant:"outlined",label:"N\xfamero da O.S.",value:T,disabled:!M||!D,InputLabelProps:{shrink:!0},className:m.a.numeroOs,onChange:function(e){return A(+e.target.value)}}),Object(r.jsx)(d.a,{disabled:!M||!D,ref:z}),D?Object(r.jsx)(l.b,{onClick:U,style:{marginLeft:"8px"},size:25,color:"#28aa0f"}):Object(r.jsx)(l.g,{onClick:function(){return L(!0)},size:25,style:{marginLeft:"8px"},color:"#e9bb1f"})]}),Object(r.jsxs)("div",{className:m.a.formDiv,children:[Object(r.jsx)("span",{children:"Lote RPS: "}),Object(r.jsx)(i.a,{label:"Lote RPS",type:"number",variant:"outlined",className:m.a.inputForm,disabled:!_,value:t.LOTERPS,onChange:function(e){return n(h(h({},t),{},{LOTERPS:Number(e.target.value)}))},InputProps:{endAdornment:_?Object(r.jsx)(l.b,{size:30,color:"#28aa0f",onClick:q}):Object(r.jsx)(l.g,{size:30,color:"#e9bb1f",onClick:function(){M&&S(!0)}})}})]}),Object(r.jsxs)("div",{className:m.a.formDiv,children:[Object(r.jsx)("span",{children:"Lote NFS-e: "}),Object(r.jsx)(i.a,{label:"Lote NFS-e",type:"number",variant:"outlined",className:m.a.inputForm,disabled:!g,value:t.LOTENFSE,onChange:function(e){return n(h(h({},t),{},{LOTENFSE:Number(e.target.value)}))},InputProps:{endAdornment:g?Object(r.jsx)(l.b,{size:30,color:"#28aa0f",onClick:q}):Object(r.jsx)(l.g,{size:30,color:"#e9bb1f",onClick:function(){M&&E(!0)}})}})]})]})]}),Object(r.jsx)(b.a,{})]}):Object(r.jsx)(f.a,{})})}}},[["wqa0",0,1,4,7,2,3,5,6]]]);