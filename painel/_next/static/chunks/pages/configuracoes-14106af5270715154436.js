_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[20],{"0sQZ":function(e,a,t){e.exports={wrapper:"styles_wrapper__eV2IN",configForm:"styles_configForm__XLtU9",formInput:"styles_formInput__2hvK5",mailConfigDiv:"styles_mailConfigDiv__AX1jo",mailConfigInput:"styles_mailConfigInput__2Zns_",mailButtonDiv:"styles_mailButtonDiv__1bxYJ"}},GGeT:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/configuracoes",function(){return t("jf15")}])},KJax:function(e,a,t){"use strict";var n=t("wx14"),r=t("Ff2n"),i=t("q1tI"),o=(t("17x9"),t("iuhU")),s=t("H2TA"),c=i.forwardRef((function(e,a){var t=e.classes,s=e.className,c=e.row,l=void 0!==c&&c,u=Object(r.a)(e,["classes","className","row"]);return i.createElement("div",Object(n.a)({className:Object(o.a)(t.root,s,l&&t.row),ref:a},u))}));a.a=Object(s.a)({root:{display:"flex",flexDirection:"column",flexWrap:"wrap"},row:{flexDirection:"row"}},{name:"MuiFormGroup"})(c)},Sbtq:function(e,a,t){"use strict";t.d(a,"a",(function(){return f})),t.d(a,"b",(function(){return p}));var n=t("nKUr"),r=t("vJKn"),i=t.n(r),o=t("rg98"),s=t("q1tI"),c=t("tRs7"),l=t("Dp36"),u=(t("jDDT"),Object(s.createContext)({})),d=new c.a,f=function(e){var a=e.children,t=Object(s.useState)(),r=t[0],c=t[1],f=Object(s.useState)(),p=f[0],j=f[1];Object(s.useEffect)((function(){l.a.get("/config/gerais").then((function(e){c(e.data.config)})),l.a.get("/config/filiais").then((function(e){j(e.data.filiaisParsed)}))}),[]);var b=function(){var e=Object(o.a)(i.a.mark((function e(a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(a),e.next=3,l.a.post("/config/gerais",a);case 3:"ok"===e.sent.data.status&&d.notify("Configura\xe7\xf5es alteradas","success");case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return Object(n.jsx)(u.Provider,{value:{config:r,filiais:p,changeConfig:b},children:a})},p=function(){return Object(s.useContext)(u)}},jf15:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return q}));var n=t("nKUr"),r=t("vJKn"),i=t.n(r),o=t("cpVT"),s=t("rg98"),c=t("q1tI"),l=t("FGyW"),u=t("p46w"),d=t.n(u),f=t("bFzY"),p=(t("jDDT"),t("Dp36")),j=t("0sQZ"),b=t.n(j),g=t("tRs7"),m=t("R/WZ"),v=t("ADg1"),h=t("1AYd"),O=t("cVXz"),x=t("pdwK"),C=t("jjAL"),w=t("KJax"),y=t("ZGBi"),E=t("UhlP"),_=t("r9w1"),P=t("Z3vd"),D=t("Sbtq"),S=t("UN6+");function k(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function N(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?k(Object(t),!0).forEach((function(a){Object(o.a)(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):k(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}var I={PaperProps:{style:{maxHeight:224,width:250}}},T=new g.a,F=Object(m.a)((function(e){return{formControl:{margin:e.spacing(1),marginTop:"2rem",minWidth:300,maxWidth:300},chips:{display:"flex",flexWrap:"wrap"},chip:{margin:2},noLabel:{marginTop:e.spacing(3)}}}));function q(){var e=Object(c.useState)(),a=e[0],t=e[1],r=Object(c.useState)(),o=r[0],u=(r[1],Object(f.c)()),j=u.user,g=u.filialPrincipal,m=u.changeFilial,k=Object(D.b)(),q=k.config,A=k.changeConfig,z=Object(c.useState)(),M=z[0],B=z[1],G=Object(c.useState)(),K=G[0],L=G[1],R=F();Object(c.useEffect)((function(){p.a.get("/config/filiais").then((function(e){e.data.filiaisParsed&&t(e.data.filiaisParsed)})),p.a.get("/config/email").then((function(e){e.data.config&&L(e.data.config)}))}),[]),Object(c.useEffect)((function(){B(q)}),[q]);var J=function(){var e=Object(s.a)(i.a.mark((function e(){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(K.port<=0||""===K.host||""===K.auth.user||""===K.auth.pass)){e.next=3;break}return T.notify("Preencha todos os campos para atualizar os dados de e-mail","warning"),e.abrupt("return");case 3:return e.prev=3,e.next=6,p.a.post("/config/email",N(N({},K),{},{port:+K.port}));case 6:"ok"===e.sent.data.status&&T.notify("Dados de e-mail atualizados com sucesso","success"),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(3),a=e.t0.response,console.log(a.data),T.notify("Altera\xe7\xf5es n\xe3o salvas.\n        Motivo: ".concat(a.data.message.errno||a.data.message.response),"error");case 15:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(){return e.apply(this,arguments)}}(),Z=function(){var e=Object(s.a)(i.a.mark((function e(){var a,t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.get("/config/email/test");case 3:"ok"===(a=e.sent).data.status&&(console.log("test",a.data),T.notify("Email enviado com sucesso","success")),e.next=12;break;case 7:e.prev=7,e.t0=e.catch(0),t=e.t0.response,console.log(t.data),T.notify("Erro: ".concat(t.data.message.errno||t.data.message.response),"error");case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return Object(n.jsxs)("div",{className:b.a.wrapper,children:[Object(n.jsx)(l.a,{}),"SEM_ACESSO"!==(null===j||void 0===j?void 0:j.permissions.configuracoes)?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("h2",{children:"Configura\xe7\xf5es"}),Object(n.jsxs)("form",{className:b.a.configForm,children:[Object(n.jsxs)(v.a,{className:R.formControl,children:[Object(n.jsx)(h.a,{id:"filiais",children:"Filial Principal"}),Object(n.jsx)(O.a,{labelId:"filiais",defaultValue:g.CODEMPRESA,value:o,disabled:"ACESSO_TOTAL"!==(null===j||void 0===j?void 0:j.permissions.configuracoes),input:Object(n.jsx)(x.a,{}),MenuProps:I,children:null===a||void 0===a?void 0:a.map((function(e){return Object(n.jsx)(C.a,{value:e.CODEMPRESA,onClick:function(){return function(e){d.a.set("filial",e),m(e)}(e)},children:e.NOMERED},e.CODEMPRESA)}))})]}),M&&Object(n.jsxs)(v.a,{className:"".concat(R.formControl," ").concat(b.a.configsGerais),children:[Object(n.jsxs)("div",{className:b.a.formInput,children:[Object(n.jsx)("span",{children:"Zerar digita\xe7\xe3o das outras filiais: "}),Object(n.jsx)(w.a,{children:Object(n.jsx)(y.a,{label:"",control:Object(n.jsx)(E.a,{size:"medium",disabled:"admin"!==(null===j||void 0===j?void 0:j.role),checked:M.generalConfig.zeraEstoqueFilialDigitacao,color:"primary"}),onChange:function(){return B(N(N({},M),{},{generalConfig:N(N({},M.generalConfig),{},{zeraEstoqueFilialDigitacao:!M.generalConfig.zeraEstoqueFilialDigitacao})}))}})})]}),Object(n.jsxs)("div",{className:b.a.formInput,children:[Object(n.jsx)("span",{children:"Soma estoque das filiais: "}),Object(n.jsx)(w.a,{children:Object(n.jsx)(y.a,{label:"",control:Object(n.jsx)(E.a,{size:"medium",disabled:"admin"!==(null===j||void 0===j?void 0:j.role),checked:M.generalConfig.somaSaldoEstoque,color:"primary"}),onChange:function(){return B(N(N({},M),{},{generalConfig:N(N({},M.generalConfig),{},{somaSaldoEstoque:!M.generalConfig.somaSaldoEstoque})}))}})})]}),Object(n.jsxs)("div",{className:b.a.formInput,children:[Object(n.jsx)("span",{children:"Caminho do banco de dados: "}),Object(n.jsx)(_.a,{label:"Caminho",variant:"outlined",disabled:"admin"!==(null===j||void 0===j?void 0:j.role),value:M.database,onChange:function(e){return B(N(N({},M),{},{database:e.target.value}))}})]})]})]}),Object(n.jsx)(P.a,{style:{backgroundColor:"#B23237",color:"#f4f4f4",width:"fit-content",margin:"3rem auto 0 auto"},className:b.a.formButton,variant:"contained",disabled:"admin"!==(null===j||void 0===j?void 0:j.role),color:"primary",onClick:function(){A(M)},children:"Confirmar altera\xe7\xf5es"}),Object(n.jsxs)("div",{className:b.a.mailConfigDiv,children:[Object(n.jsx)("h2",{children:"Configura\xe7\xf5es de E-mail"}),Object(n.jsxs)("div",{className:b.a.mailConfigInput,children:[Object(n.jsx)(_.a,{label:"Servidor SMTP",variant:"outlined",InputLabelProps:{shrink:!0},value:null===K||void 0===K?void 0:K.host,onChange:function(e){return L(N(N({},K),{},{host:e.target.value}))}}),Object(n.jsx)(_.a,{label:"Porta",type:"number",variant:"outlined",InputLabelProps:{shrink:!0},InputProps:{inputProps:{min:0}},value:null===K||void 0===K?void 0:K.port,onChange:function(e){return L(N(N({},K),{},{port:e.target.value}))}}),Object(n.jsx)(_.a,{label:"E-mail",type:"email",variant:"outlined",InputLabelProps:{shrink:!0},value:null===K||void 0===K?void 0:K.auth.user,onChange:function(e){return L(N(N({},K),{},{auth:N(N({},K.auth),{},{user:e.target.value})}))}}),Object(n.jsx)(_.a,{label:"Senha",type:"password",variant:"outlined",InputLabelProps:{shrink:!0},value:null===K||void 0===K?void 0:K.auth.pass,onChange:function(e){return L(N(N({},K),{},{auth:N(N({},K.auth),{},{pass:e.target.value})}))}}),Object(n.jsxs)("div",{className:b.a.mailButtonDiv,children:[Object(n.jsx)(P.a,{variant:"contained",style:{backgroundColor:"#B23237",width:"fit-content",color:"#f4f4f4",margin:"1rem auto 0 auto"},color:"primary",onClick:Z,children:"Testar E-mail"}),Object(n.jsx)(P.a,{variant:"contained",style:{backgroundColor:"#B23237",width:"fit-content",color:"#f4f4f4",margin:"1rem auto 0 auto"},color:"primary",onClick:J,children:"Salvar altera\xe7\xf5es de E-mail"})]})]})]})]}):Object(n.jsx)(S.a,{})]})}}},[["GGeT",0,1,4,7,3,2,5,6,8]]]);