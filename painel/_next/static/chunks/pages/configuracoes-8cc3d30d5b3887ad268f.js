_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[20],{"0sQZ":function(e,t,a){e.exports={wrapper:"styles_wrapper__eV2IN",configForm:"styles_configForm__XLtU9",formInput:"styles_formInput__2hvK5",mailConfigDiv:"styles_mailConfigDiv__AX1jo",mailConfigInput:"styles_mailConfigInput__2Zns_",mailButtonDiv:"styles_mailButtonDiv__1bxYJ"}},GGeT:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/configuracoes",function(){return a("jf15")}])},KJax:function(e,t,a){"use strict";var n=a("wx14"),r=a("Ff2n"),i=a("q1tI"),o=(a("17x9"),a("iuhU")),s=a("H2TA"),c=i.forwardRef((function(e,t){var a=e.classes,s=e.className,c=e.row,l=void 0!==c&&c,u=Object(r.a)(e,["classes","className","row"]);return i.createElement("div",Object(n.a)({className:Object(o.a)(a.root,s,l&&a.row),ref:t},u))}));t.a=Object(s.a)({root:{display:"flex",flexDirection:"column",flexWrap:"wrap"},row:{flexDirection:"row"}},{name:"MuiFormGroup"})(c)},Sbtq:function(e,t,a){"use strict";a.d(t,"a",(function(){return d})),a.d(t,"b",(function(){return p}));var n=a("nKUr"),r=a("vJKn"),i=a.n(r),o=a("rg98"),s=a("q1tI"),c=a("tRs7"),l=(a("jDDT"),a("ddHN")),u=Object(s.createContext)({}),f=new c.a,d=function(e){var t,a=e.children,r=Object(s.useState)(),c=r[0],d=r[1],p=Object(s.useState)(),j=p[0],b=p[1],g=Object(l.b)().getApi;Object(s.useEffect)((function(){g.then((function(e){(t=e).get("/config/gerais").then((function(e){d(e.data.config)})),t.get("/config/filiais").then((function(e){b(e.data.filiaisParsed)}))}))}),[]);var m=function(){var e=Object(o.a)(i.a.mark((function e(a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:g.then(function(){var e=Object(o.a)(i.a.mark((function e(n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n,d(a),console.log(a),e.next=5,t.post("/config/gerais",a);case 5:"ok"===e.sent.data.status&&f.notify("Configura\xe7\xf5es alteradas","success");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsx)(u.Provider,{value:{config:c,filiais:j,changeConfig:m},children:a})},p=function(){return Object(s.useContext)(u)}},"UN6+":function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a("nKUr"),r=a("33Fu"),i=a("YhpK"),o=a.n(i);function s(){return Object(n.jsxs)("div",{className:o.a.wrapper,children:[Object(n.jsx)(r.c,{size:50,color:"#b23237"}),Object(n.jsx)("h1",{children:"Acesso Bloqueado"})]})}},YhpK:function(e,t,a){e.exports={wrapper:"style_wrapper__22fyg"}},jf15:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return q}));var n=a("nKUr"),r=a("vJKn"),i=a.n(r),o=a("cpVT"),s=a("rg98"),c=a("q1tI"),l=a("FGyW"),u=a("p46w"),f=a.n(u),d=a("bFzY"),p=(a("jDDT"),a("0sQZ")),j=a.n(p),b=a("tRs7"),g=a("R/WZ"),m=a("ADg1"),h=a("1AYd"),v=a("cVXz"),O=a("pdwK"),x=a("jjAL"),w=a("KJax"),C=a("ZGBi"),y=a("UhlP"),_=a("r9w1"),E=a("Z3vd"),S=a("Sbtq"),P=a("UN6+"),k=a("ddHN");function N(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function D(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?N(Object(a),!0).forEach((function(t){Object(o.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):N(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var A,T={PaperProps:{style:{maxHeight:224,width:250}}},I=new b.a,F=Object(g.a)((function(e){return{formControl:{margin:e.spacing(1),marginTop:"2rem",minWidth:300,maxWidth:300},chips:{display:"flex",flexWrap:"wrap"},chip:{margin:2},noLabel:{marginTop:e.spacing(3)}}}));function q(){var e=Object(c.useState)(),t=e[0],a=e[1],r=Object(c.useState)(),o=r[0],u=(r[1],Object(d.c)()),p=u.user,b=u.filialPrincipal,g=u.changeFilial,N=Object(S.b)(),q=N.config,K=N.changeConfig,L=Object(c.useState)(),z=L[0],B=L[1],G=Object(c.useState)(),M=G[0],R=G[1],U=F(),J=Object(k.b)().getApi;Object(c.useEffect)((function(){J.then((function(e){(A=e).get("/config/filiais").then((function(e){e.data.filiaisParsed&&a(e.data.filiaisParsed)})),A.get("/config/email").then((function(e){e.data.config&&R(e.data.config)}))}))}),[]),Object(c.useEffect)((function(){B(q)}),[q]);var Z=function(){var e=Object(s.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(M.port<=0||""===M.host||""===M.auth.user||""===M.auth.pass)){e.next=3;break}return I.notify("Preencha todos os campos para atualizar os dados de e-mail","warning"),e.abrupt("return");case 3:return e.prev=3,e.next=6,A.post("/config/email",D(D({},M),{},{port:+M.port}));case 6:"ok"===e.sent.data.status&&I.notify("Dados de e-mail atualizados com sucesso","success"),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(3),t=e.t0.response,console.log(t.data),I.notify("Altera\xe7\xf5es n\xe3o salvas.\n        Motivo: ".concat(t.data.message.errno||t.data.message.response),"error");case 15:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(){return e.apply(this,arguments)}}(),W=function(){var e=Object(s.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A.get("/config/email/test");case 3:"ok"===(t=e.sent).data.status&&(console.log("test",t.data),I.notify("Email enviado com sucesso","success")),e.next=12;break;case 7:e.prev=7,e.t0=e.catch(0),a=e.t0.response,console.log(a.data),I.notify("Erro: ".concat(a.data.message.errno||a.data.message.response),"error");case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return Object(n.jsxs)("div",{className:j.a.wrapper,children:[Object(n.jsx)(l.a,{}),"SEM_ACESSO"!==(null===p||void 0===p?void 0:p.permissions.configuracoes)?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("h2",{children:"Sele\xe7\xe3o de Filiais"}),Object(n.jsxs)("form",{className:j.a.configForm,children:[Object(n.jsxs)(m.a,{className:U.formControl,children:[Object(n.jsx)(h.a,{id:"filiais",children:"Filial Principal"}),Object(n.jsx)(v.a,{labelId:"filiais",defaultValue:b.CODEMPRESA,value:o,disabled:"ACESSO_TOTAL"!==(null===p||void 0===p?void 0:p.permissions.configuracoes),input:Object(n.jsx)(O.a,{}),MenuProps:T,children:null===t||void 0===t?void 0:t.map((function(e){return Object(n.jsx)(x.a,{value:e.CODEMPRESA,onClick:function(){return function(e){f.a.set("filial",e),g(e)}(e)},children:e.NOMERED},e.CODEMPRESA)}))})]}),Object(n.jsx)("h2",{style:{marginTop:"2rem"},children:"Configura\xe7\xf5es Gerais"}),z&&Object(n.jsxs)(m.a,{className:"".concat(U.formControl," ").concat(j.a.configsGerais),children:[Object(n.jsxs)("div",{className:j.a.formInput,children:[Object(n.jsx)("span",{children:"Zerar digita\xe7\xe3o das outras filiais: "}),Object(n.jsx)(w.a,{children:Object(n.jsx)(C.a,{label:"",control:Object(n.jsx)(y.a,{size:"medium",disabled:"ACESSO_TOTAL"!==(null===p||void 0===p?void 0:p.permissions.configuracoes),checked:z.generalConfig.zeraEstoqueFilialDigitacao,color:"primary"}),onChange:function(){return B(D(D({},z),{},{generalConfig:D(D({},z.generalConfig),{},{zeraEstoqueFilialDigitacao:!z.generalConfig.zeraEstoqueFilialDigitacao})}))}})})]}),Object(n.jsxs)("div",{className:j.a.formInput,children:[Object(n.jsx)("span",{children:"Soma estoque das filiais: "}),Object(n.jsx)(w.a,{children:Object(n.jsx)(C.a,{label:"",control:Object(n.jsx)(y.a,{size:"medium",disabled:"ACESSO_TOTAL"!==(null===p||void 0===p?void 0:p.permissions.configuracoes),checked:z.generalConfig.somaSaldoEstoque,color:"primary"}),onChange:function(){return B(D(D({},z),{},{generalConfig:D(D({},z.generalConfig),{},{somaSaldoEstoque:!z.generalConfig.somaSaldoEstoque})}))}})})]}),Object(n.jsxs)("div",{className:j.a.formInput,children:[Object(n.jsx)("span",{children:"Caminho do banco de dados: "}),Object(n.jsx)(_.a,{label:"Caminho",variant:"outlined",disabled:"admin"!==(null===p||void 0===p?void 0:p.role),value:z.database,onChange:function(e){return B(D(D({},z),{},{database:e.target.value}))}})]})]})]}),Object(n.jsx)(E.a,{style:{backgroundColor:"#B23237",color:"#f4f4f4",width:"fit-content",margin:"3rem auto 0 auto"},className:j.a.formButton,variant:"contained",disabled:"ACESSO_TOTAL"!==(null===p||void 0===p?void 0:p.permissions.configuracoes),color:"primary",onClick:function(){K(z)},children:"Confirmar altera\xe7\xf5es"}),Object(n.jsxs)("div",{className:j.a.mailConfigDiv,children:[Object(n.jsx)("h2",{children:"Configura\xe7\xf5es de E-mail"}),Object(n.jsxs)("div",{className:j.a.mailConfigInput,children:[Object(n.jsx)(_.a,{label:"Servidor SMTP",variant:"outlined",InputLabelProps:{shrink:!0},value:null===M||void 0===M?void 0:M.host,onChange:function(e){return R(D(D({},M),{},{host:e.target.value}))}}),Object(n.jsx)(_.a,{label:"Porta",type:"number",variant:"outlined",InputLabelProps:{shrink:!0},InputProps:{inputProps:{min:0}},value:null===M||void 0===M?void 0:M.port,onChange:function(e){return R(D(D({},M),{},{port:e.target.value}))}}),Object(n.jsx)(_.a,{label:"E-mail",type:"email",variant:"outlined",InputLabelProps:{shrink:!0},value:null===M||void 0===M?void 0:M.auth.user,onChange:function(e){return R(D(D({},M),{},{auth:D(D({},M.auth),{},{user:e.target.value})}))}}),Object(n.jsx)(_.a,{label:"Senha",type:"password",variant:"outlined",InputLabelProps:{shrink:!0},value:null===M||void 0===M?void 0:M.auth.pass,onChange:function(e){return R(D(D({},M),{},{auth:D(D({},M.auth),{},{pass:e.target.value})}))}}),Object(n.jsxs)("div",{className:j.a.mailButtonDiv,children:[Object(n.jsx)(E.a,{variant:"contained",style:{backgroundColor:"#B23237",width:"fit-content",color:"#f4f4f4",margin:"1rem auto 0 auto"},color:"primary",onClick:W,children:"Testar E-mail"}),Object(n.jsx)(E.a,{variant:"contained",style:{backgroundColor:"#B23237",width:"fit-content",color:"#f4f4f4",margin:"1rem auto 0 auto"},color:"primary",onClick:Z,children:"Salvar altera\xe7\xf5es de E-mail"})]})]})]})]}):Object(n.jsx)(P.a,{})]})}}},[["GGeT",0,1,4,7,2,3,5,6,8]]]);