_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[18],{"/Tr7":function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a("jIYg");function r(e){Object(n.a)(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===typeof e&&"[object Date]"===t?new Date(e.getTime()):"number"===typeof e||"[object Number]"===t?new Date(e):("string"!==typeof e&&"[object String]"!==t||"undefined"===typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}},"0ssY":function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/altera-adm-convenio",function(){return a("E0bq")}])},DbXy:function(e,t,a){e.exports={invisible:"styles_invisible__2eb-b",visible:"styles_visible__2b1oV",totais:"styles_totais__1vmZn",produtoInput:"styles_produtoInput__27fS-",clienteInput:"styles_clienteInput__2WKkT",searchResult:"styles_searchResult__26Gln"}},E0bq:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return S}));var n=a("nKUr"),r=a("cpVT"),i=a("vJKn"),s=a.n(i),o=a("rg98"),c=a("q1tI"),l=a("r9w1"),d=a("Z3vd"),u=a("YMtY"),O=a("/Tr7"),p=a("jIYg");function b(e,t){Object(p.a)(2,arguments);var a=Object(O.a)(e),n=Object(O.a)(t),r=a.getTime()-n.getTime();return r<0?-1:r>0?1:r}var f=a("FGyW"),m=a("Ry4D"),v=a("UN6+"),h=a("tRs7"),j=(a("jDDT"),a("ZeHp")),C=a.n(j),g=a("r9V7"),A=a.n(g),D=a("Dp36"),N=a("bFzY");function I(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function T(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?I(Object(a),!0).forEach((function(t){Object(r.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):I(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var y=new h.a,E=Object.freeze({DATAINICIAL:"",DATAFINAL:""}),w=[{field:"id",headerName:"Documento",width:150,headerClassName:"header-data-grid",cellClassName:"cell-data-grid"},{field:"TIPODOCTO",headerName:"Tipo",width:100,headerClassName:"header-data-grid",cellClassName:"cell-data-grid"},{field:"CODEMPRESA",headerName:"Empresa",width:150,headerClassName:"header-data-grid",cellClassName:"cell-data-grid"},{field:"DT_EMISSAO",headerName:"Emiss\xe3o",width:175,headerClassName:"header-data-grid",cellClassName:"cell-data-grid"},{field:"DT_VENCIMENTO",headerName:"Vencimento",width:175,headerClassName:"header-data-grid",cellClassName:"cell-data-grid"},{field:"VALOR",headerName:"Valor",width:150,headerClassName:"header-data-grid",cellClassName:"cell-data-grid"},{field:"CODAUTORIZACAO",headerName:"NSU",width:175,headerClassName:"header-data-grid",cellClassName:"cell-data-grid"},{field:"NUMDOCORIG",headerName:"Doc. Origem",width:175,headerClassName:"header-data-grid",cellClassName:"cell-data-grid"}];function S(){var e=Object(c.useState)(!1),t=(e[0],e[1]),a=Object(c.useState)(E),r=a[0],i=a[1],O=Object(c.useState)(!1),p=O[0],h=O[1],j=Object(c.useState)(!1),g=j[0],I=j[1],S=Object(c.useState)([]),_=S[0],x=S[1],L=Object(c.useState)([]),M=L[0],R=L[1],k=Object(c.useState)(w),P=k[0],F=(k[1],Object(c.useRef)(null)),V=Object(c.useRef)(null),U=Object(N.c)().user,B=function(){var e=Object(o.a)(s.a.mark((function e(){var t,a,n,i,o,c,l,d,u;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(t=F.current)&&void 0!==t&&t.getMyState()&&void 0!==(null===(a=F.current)||void 0===a?void 0:a.getMyState().CODCLIENTE)&&""!==r.DATAINICIAL&&""!==r.DATAFINAL){e.next=3;break}return y.notify("Preencha todos os campos","warning"),e.abrupt("return");case 3:if(i=r.DATAINICIAL.split("-"),o=r.DATAFINAL.split("-"),c=new Date(+i[0],+i[1],+i[2]),l=new Date(+o[0],+o[1],+o[2]),1!==b(c,l)){e.next=10;break}return y.notify("Data inicial \xe9 posterior a data final","warning"),e.abrupt("return");case 10:return I(!0),h(!0),e.next=14,D.a.post("/adm-conv/get-documents",{CODCLIENTE:null===(n=F.current)||void 0===n?void 0:n.getMyState().CODCLIENTE,DATAINICIO:r.DATAINICIAL.split("-").reverse().join("."),DATAFIM:r.DATAFINAL.split("-").reverse().join(".")});case 14:"ok"===(d=e.sent).data.status&&(u=d.data.documentos.map((function(e){return{id:e.CODDOCTO,TIPODOCTO:e.TIPODOCTO,CODEMPRESA:e.CODEMPRESA,DT_EMISSAO:Y(e.DT_EMISSAO),DT_VENCIMENTO:Y(e.DT_VENCIMENTO),VALOR:Z(e.VALORDOCTO),CODAUTORIZACAO:e.CODAUTORIZACAO,NUMDOCORIG:e.NUMDOCORIG}})),R(u),h(!1));case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Y=function(e){return null===e?"":new Date(e).toLocaleString().split(" ")[0]},Z=function(e){return e.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})},q=function(){var e=Object(o.a)(s.a.mark((function e(){var t,a,n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(_.length<1)){e.next=3;break}return y.notify("Selecione ao menos um documento","warning"),e.abrupt("return");case 3:if(null!==(t=V.current)&&void 0!==t&&t.getMyState()&&void 0!==(null===(a=V.current)||void 0===a?void 0:a.getMyState().CODCLIENTE)){e.next=6;break}return y.notify("Preencha a nova administradora de cart\xe3o","warning"),e.abrupt("return");case 6:return n=_.filter((function(e,t,a){return a.findIndex((function(t){return t.id===e.id}))===t})),e.prev=7,e.next=10,D.a.patch("/adm-conv/update-adm",{CODCLIENTE:null===(r=V.current)||void 0===r?void 0:r.getMyState().CODCLIENTE,documentos:n});case 10:"ok"===e.sent.data.status?(x([]),y.notify("Administradora alterada com sucesso","success")):y.notify("Algo deu errado","error"),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(7),y.notify("Algo deu errado","error");case 17:case"end":return e.stop()}}),e,null,[[7,14]])})));return function(){return e.apply(this,arguments)}}();return Object(n.jsx)("section",{className:C.a.wrapper,children:"SEM_ACESSO"!==(null===U||void 0===U?void 0:U.permissions.alteraAdmConvenio)?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(f.a,{}),Object(n.jsx)("h2",{children:"Alterar Administradora de Cart\xe3o"}),Object(n.jsxs)("div",{className:C.a.searchAdmDiv,children:[Object(n.jsx)(m.a,{handleIsSelected:function(){t((function(e){return!e}))},ref:F,admConv:!0}),Object(n.jsxs)("div",{className:C.a.buttonsDiv,children:[Object(n.jsx)(l.a,{type:"date",name:"DATAINICIAL",label:"Data Inicial",value:r.DATAINICIAL,onChange:function(e){return i(T(T({},r),{},{DATAINICIAL:e.target.value}))},InputLabelProps:{shrink:!0},style:{marginRight:"38px"}}),Object(n.jsx)(l.a,{type:"date",name:"DATAFINAL",label:"Data Final",value:r.DATAFINAL,onChange:function(e){return i(T(T({},r),{},{DATAFINAL:e.target.value}))},InputLabelProps:{shrink:!0}})]})]}),Object(n.jsx)(d.a,{variant:"contained",color:"primary",style:{backgroundColor:"#B23237",width:"150px",marginTop:"1rem",marginBottom:"2rem"},onClick:B,children:"Buscar"}),g&&p&&Object(n.jsx)("div",{className:C.a.loadingDiv,children:Object(n.jsx)(A.a,{type:"Bars",color:"#B23237",height:80,width:80})}),g&&!p&&M&&P&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(u.a,{autoHeight:!0,rows:M,columns:P,pageSize:15,checkboxSelection:!0,disableSelectionOnClick:!0,rowsPerPageOptions:[25,50,100],onSelectionModelChange:function(e){if("ACESSO_TOTAL"===(null===U||void 0===U?void 0:U.permissions.alteraAdmConvenio)){var t=new Set(e.selectionModel);x(M.filter((function(e){return t.has(e.id)})))}}}),Object(n.jsxs)("div",{className:C.a.updateDiv,children:[Object(n.jsx)(m.a,{disabled:"ACESSO_TOTAL"!==(null===U||void 0===U?void 0:U.permissions.alteraAdmConvenio),ref:V,admConv:!0}),Object(n.jsx)(d.a,{variant:"contained",color:"primary",disabled:"ACESSO_TOTAL"!==(null===U||void 0===U?void 0:U.permissions.alteraAdmConvenio),style:{backgroundColor:"#B23237",width:"300px",marginTop:"1rem",marginBottom:"2rem",color:"#f4f4f4"},onClick:q,children:"Alterar Administradora"})]})]})]}):Object(n.jsx)(v.a,{})})}},Ry4D:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var n=a("nKUr"),r=a("r9w1"),i=a("q1tI"),s=a.n(i),o=a("Dp36"),c=a("DbXy"),l=a.n(c),d=s.a.forwardRef((function(e,t){var a=e.disabled,s=e.admConv,c=void 0!==s&&s,d=e.handleIsSelected,u=Object(i.useState)(),O=u[0],p=u[1],b=Object(i.useState)(),f=b[0],m=b[1],v=Object(i.useState)(),h=v[0],j=v[1],C=Object(i.useState)(!1),g=C[0],A=C[1],D=Object(i.useRef)(null);Object(i.useImperativeHandle)(t,(function(){return{getMyState:function(){return h}}}),[h]),Object(i.useEffect)((function(){window.addEventListener("mousedown",N)}),[]);var N=function(e){var t;D&&"NOMECLIENTE"===e.target.name?A(!0):!D||null!==(t=D.current)&&void 0!==t&&t.contains(e.target)||A(!1)};return Object(n.jsxs)("div",{className:l.a.clienteInput,children:[Object(n.jsx)(r.a,{label:c?"Administradora de Cart\xe3o":"Cliente",name:"NOMECLIENTE",autoComplete:"off",variant:"outlined",disabled:a||!1,value:O,color:"primary",onChange:function(e){return function(e){if(A(!0),p(e.target.value),e.target.value.length>1){var t=c?"/adm-conv":"/clientes";o.a.post(t,{search:e.target.value}).then((function(e){m(c?e.data.administradoras:e.data.parsedClientes)}))}else A(!1),m([])}(e)}}),f&&Object(n.jsx)("div",{ref:D,className:"".concat(l.a.searchResult," ").concat(g?l.a.visible:l.a.invisible),children:f.map((function(e){return Object(n.jsx)("span",{onClick:function(){p(e.CODCLIENTE+" - "+e.NOME),j(e),A(!1),c&&d&&d()},children:e.CODCLIENTE+" - "+e.NOME},e.CODCLIENTE)}))})]})}))},ZeHp:function(e,t,a){e.exports={wrapper:"styles_wrapper__l3uFS",searchAdmDiv:"styles_searchAdmDiv__d6zYx",buttonsDiv:"styles_buttonsDiv__1K4VM",loadingDiv:"styles_loadingDiv__2Ohrt",updateDiv:"styles_updateDiv__3j82l"}},jIYg:function(e,t,a){"use strict";function n(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}a.d(t,"a",(function(){return n}))}},[["0ssY",0,1,4,7,10,3,2,5,6,8,11]]]);