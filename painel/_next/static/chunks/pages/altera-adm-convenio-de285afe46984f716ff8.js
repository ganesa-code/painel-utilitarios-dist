_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[18],{"/Tr7":function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a("jIYg");function r(e){Object(n.a)(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===typeof e&&"[object Date]"===t?new Date(e.getTime()):"number"===typeof e||"[object Number]"===t?new Date(e):("string"!==typeof e&&"[object String]"!==t||"undefined"===typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}},"0ssY":function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/altera-adm-convenio",function(){return a("E0bq")}])},DbXy:function(e,t,a){e.exports={invisible:"styles_invisible__2eb-b",visible:"styles_visible__2b1oV",totais:"styles_totais__1vmZn",produtoInput:"styles_produtoInput__27fS-",clienteInput:"styles_clienteInput__2WKkT",searchResult:"styles_searchResult__26Gln"}},E0bq:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return S}));var n=a("nKUr"),r=a("cpVT"),i=a("vJKn"),s=a.n(i),c=a("rg98"),o=a("q1tI"),l=a("r9w1"),d=a("Z3vd"),u=a("YMtY"),O=a("/Tr7"),p=a("jIYg");function f(e,t){Object(p.a)(2,arguments);var a=Object(O.a)(e),n=Object(O.a)(t),r=a.getTime()-n.getTime();return r<0?-1:r>0?1:r}var b=a("FGyW"),m=a("Ry4D"),v=a("UN6+"),h=a("tRs7"),j=(a("jDDT"),a("ZeHp")),g=a.n(j),C=a("r9V7"),A=a.n(C),N=a("bFzY"),D=a("ddHN");function I(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function T(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?I(Object(a),!0).forEach((function(t){Object(r.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):I(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var w,y=new h.a,E=Object.freeze({DATAINICIAL:"",DATAFINAL:""}),_=[{field:"id",headerName:"Documento",width:150,headerClassName:"header-data-grid",cellClassName:"cell-data-grid"},{field:"TIPODOCTO",headerName:"Tipo",width:100,headerClassName:"header-data-grid",cellClassName:"cell-data-grid"},{field:"CODEMPRESA",headerName:"Empresa",width:150,headerClassName:"header-data-grid",cellClassName:"cell-data-grid"},{field:"DT_EMISSAO",headerName:"Emiss\xe3o",width:175,headerClassName:"header-data-grid",cellClassName:"cell-data-grid"},{field:"DT_VENCIMENTO",headerName:"Vencimento",width:175,headerClassName:"header-data-grid",cellClassName:"cell-data-grid"},{field:"VALOR",headerName:"Valor",width:150,headerClassName:"header-data-grid",cellClassName:"cell-data-grid"},{field:"CODAUTORIZACAO",headerName:"NSU",width:175,headerClassName:"header-data-grid",cellClassName:"cell-data-grid"},{field:"NUMDOCORIG",headerName:"Doc. Origem",width:175,headerClassName:"header-data-grid",cellClassName:"cell-data-grid"}];function S(){var e=Object(o.useState)(!1),t=(e[0],e[1]),a=Object(o.useState)(E),r=a[0],i=a[1],O=Object(o.useState)(!1),p=O[0],h=O[1],j=Object(o.useState)(!1),C=j[0],I=j[1],S=Object(o.useState)([]),x=S[0],L=S[1],M=Object(o.useState)([]),R=M[0],k=M[1],P=Object(o.useState)(_),F=P[0],U=(P[1],Object(o.useRef)(null)),V=Object(o.useRef)(null),Y=Object(N.c)().user,B=Object(D.b)().getApi,K=function(){var e=Object(c.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:B.then(function(){var e=Object(c.a)(s.a.mark((function e(t){var a,n,i,c,o,l,d,u,O;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(w=t,null!==(a=U.current)&&void 0!==a&&a.getMyState()&&void 0!==(null===(n=U.current)||void 0===n?void 0:n.getMyState().CODCLIENTE)&&""!==r.DATAINICIAL&&""!==r.DATAFINAL){e.next=4;break}return y.notify("Preencha todos os campos","warning"),e.abrupt("return");case 4:if(c=r.DATAINICIAL.split("-"),o=r.DATAFINAL.split("-"),l=new Date(+c[0],+c[1],+c[2]),d=new Date(+o[0],+o[1],+o[2]),1!==f(l,d)){e.next=11;break}return y.notify("Data inicial \xe9 posterior a data final","warning"),e.abrupt("return");case 11:return I(!0),h(!0),e.next=15,w.post("/adm-conv/get-documents",{CODCLIENTE:null===(i=U.current)||void 0===i?void 0:i.getMyState().CODCLIENTE,DATAINICIO:r.DATAINICIAL.split("-").reverse().join("."),DATAFIM:r.DATAFINAL.split("-").reverse().join(".")});case 15:"ok"===(u=e.sent).data.status&&(O=u.data.documentos.map((function(e){return{id:e.CODDOCTO,TIPODOCTO:e.TIPODOCTO,CODEMPRESA:e.CODEMPRESA,DT_EMISSAO:Z(e.DT_EMISSAO),DT_VENCIMENTO:Z(e.DT_VENCIMENTO),VALOR:q(e.VALORDOCTO),CODAUTORIZACAO:e.CODAUTORIZACAO,NUMDOCORIG:e.NUMDOCORIG}})),k(O),h(!1));case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Z=function(e){return null===e?"":new Date(e).toLocaleString().split(" ")[0]},q=function(e){return e.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})},H=function(){var e=Object(c.a)(s.a.mark((function e(){var t,a,n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(x.length<1)){e.next=3;break}return y.notify("Selecione ao menos um documento","warning"),e.abrupt("return");case 3:if(null!==(t=V.current)&&void 0!==t&&t.getMyState()&&void 0!==(null===(a=V.current)||void 0===a?void 0:a.getMyState().CODCLIENTE)){e.next=6;break}return y.notify("Preencha a nova administradora de cart\xe3o","warning"),e.abrupt("return");case 6:return n=x.filter((function(e,t,a){return a.findIndex((function(t){return t.id===e.id}))===t})),e.prev=7,e.next=10,w.patch("/adm-conv/update-adm",{CODCLIENTE:null===(r=V.current)||void 0===r?void 0:r.getMyState().CODCLIENTE,documentos:n});case 10:"ok"===e.sent.data.status?(L([]),y.notify("Administradora alterada com sucesso","success")):y.notify("Algo deu errado","error"),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(7),y.notify("Algo deu errado","error");case 17:case"end":return e.stop()}}),e,null,[[7,14]])})));return function(){return e.apply(this,arguments)}}();return Object(n.jsx)("section",{className:g.a.wrapper,children:"SEM_ACESSO"!==(null===Y||void 0===Y?void 0:Y.permissions.alteraAdmConvenio)?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(b.a,{}),Object(n.jsx)("h2",{children:"Alterar Administradora de Cart\xe3o"}),Object(n.jsxs)("div",{className:g.a.searchAdmDiv,children:[Object(n.jsx)(m.a,{handleIsSelected:function(){t((function(e){return!e}))},ref:U,admConv:!0}),Object(n.jsxs)("div",{className:g.a.buttonsDiv,children:[Object(n.jsx)(l.a,{type:"date",name:"DATAINICIAL",label:"Data Inicial",value:r.DATAINICIAL,onChange:function(e){return i(T(T({},r),{},{DATAINICIAL:e.target.value}))},InputLabelProps:{shrink:!0},style:{marginRight:"38px"}}),Object(n.jsx)(l.a,{type:"date",name:"DATAFINAL",label:"Data Final",value:r.DATAFINAL,onChange:function(e){return i(T(T({},r),{},{DATAFINAL:e.target.value}))},InputLabelProps:{shrink:!0}})]})]}),Object(n.jsx)(d.a,{variant:"contained",color:"primary",style:{backgroundColor:"#B23237",width:"150px",marginTop:"1rem",marginBottom:"2rem"},onClick:K,children:"Buscar"}),C&&p&&Object(n.jsx)("div",{className:g.a.loadingDiv,children:Object(n.jsx)(A.a,{type:"Bars",color:"#B23237",height:80,width:80})}),C&&!p&&R&&F&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(u.a,{autoHeight:!0,rows:R,columns:F,pageSize:15,checkboxSelection:!0,disableSelectionOnClick:!0,rowsPerPageOptions:[25,50,100],onSelectionModelChange:function(e){if("ACESSO_TOTAL"===(null===Y||void 0===Y?void 0:Y.permissions.alteraAdmConvenio)){var t=new Set(e.selectionModel);L(R.filter((function(e){return t.has(e.id)})))}}}),Object(n.jsxs)("div",{className:g.a.updateDiv,children:[Object(n.jsx)(m.a,{disabled:"ACESSO_TOTAL"!==(null===Y||void 0===Y?void 0:Y.permissions.alteraAdmConvenio),ref:V,admConv:!0}),Object(n.jsx)(d.a,{variant:"contained",color:"primary",disabled:"ACESSO_TOTAL"!==(null===Y||void 0===Y?void 0:Y.permissions.alteraAdmConvenio),style:{backgroundColor:"#B23237",width:"300px",marginTop:"1rem",marginBottom:"2rem",color:"#f4f4f4"},onClick:H,children:"Alterar Administradora"})]})]})]}):Object(n.jsx)(v.a,{})})}},Ry4D:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var n=a("nKUr"),r=a("r9w1"),i=a("q1tI"),s=a.n(i),c=a("ddHN"),o=a("DbXy"),l=a.n(o),d=s.a.forwardRef((function(e,t){var a=e.disabled,s=e.admConv,o=void 0!==s&&s,d=e.handleIsSelected,u=Object(i.useState)(),O=u[0],p=u[1],f=Object(i.useState)(),b=f[0],m=f[1],v=Object(i.useState)(),h=v[0],j=v[1],g=Object(i.useState)(!1),C=g[0],A=g[1],N=Object(i.useRef)(null),D=Object(c.b)().getApi;Object(i.useImperativeHandle)(t,(function(){return{getMyState:function(){return h}}}),[h]),Object(i.useEffect)((function(){window.addEventListener("mousedown",I)}),[]);var I=function(e){var t;N&&"NOMECLIENTE"===e.target.name?A(!0):!N||null!==(t=N.current)&&void 0!==t&&t.contains(e.target)||A(!1)};return Object(n.jsxs)("div",{className:l.a.clienteInput,children:[Object(n.jsx)(r.a,{label:o?"Administradora de Cart\xe3o":"Cliente",name:"NOMECLIENTE",autoComplete:"off",variant:"outlined",disabled:a||!1,value:O,color:"primary",onChange:function(e){return function(e){if(A(!0),p(e.target.value),e.target.value.length>0){var t=o?"/adm-conv":"/clientes";D.then((function(a){a.post(t,{search:e.target.value}).then((function(e){m(o?e.data.administradoras:e.data.parsedClientes)}))}))}else A(!1),m([])}(e)}}),b&&Object(n.jsx)("div",{ref:N,className:"".concat(l.a.searchResult," ").concat(C?l.a.visible:l.a.invisible),children:b.map((function(e){return Object(n.jsx)("span",{onClick:function(){p(e.CODCLIENTE+" - "+e.NOME),j(e),A(!1),o&&d&&d()},children:e.CODCLIENTE+" - "+e.NOME},e.CODCLIENTE)}))})]})}))},"UN6+":function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a("nKUr"),r=a("33Fu"),i=a("YhpK"),s=a.n(i);function c(){return Object(n.jsxs)("div",{className:s.a.wrapper,children:[Object(n.jsx)(r.c,{size:50,color:"#b23237"}),Object(n.jsx)("h1",{children:"Acesso Bloqueado"})]})}},YhpK:function(e,t,a){e.exports={wrapper:"style_wrapper__22fyg"}},ZeHp:function(e,t,a){e.exports={wrapper:"styles_wrapper__l3uFS",searchAdmDiv:"styles_searchAdmDiv__d6zYx",buttonsDiv:"styles_buttonsDiv__1K4VM",loadingDiv:"styles_loadingDiv__2Ohrt",updateDiv:"styles_updateDiv__3j82l"}},jIYg:function(e,t,a){"use strict";function n(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}a.d(t,"a",(function(){return n}))}},[["0ssY",0,1,4,7,10,2,3,5,6,8,11]]]);